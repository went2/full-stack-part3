(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(14),o=n.n(l),u=n(4),c=n(2),i=function(e){var t=e.handleFilter,n=e.handleShow;return r.a.createElement("form",null,"filter shown with ",r.a.createElement("input",{onChange:t}),r.a.createElement("div",null,r.a.createElement("button",{onClick:n,"data-value":"all"},"all"),r.a.createElement("button",{onClick:n,"data-value":"male"},"male"),r.a.createElement("button",{onClick:n,"data-value":"female"},"female")))},m=function(e){return r.a.createElement("form",null,r.a.createElement("div",null,"name:",r.a.createElement("input",{value:e.newName,onChange:e.handleNameInput})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberInput})),r.a.createElement("div",null,"sex:",r.a.createElement("input",{value:e.newSex,onChange:e.handleSexInput})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:e.handleSubmit},"add")))},d=function(e){var t=e.personsToShow,n=e.filterStr,a=e.handleDelete;return t.filter((function(e){return e.name.toLowerCase().indexOf(n.toLowerCase())>-1})).map((function(e){return r.a.createElement("div",{key:e.name},e.name,": ",e.number," ",e.sex,r.a.createElement("button",{key:e.name,onClick:function(t){return a(t,e.id)}},"delete"))}))},f=n(3),s=n.n(f),b="/api/persons",p=function(){return s.a.get(b).then((function(e){return e.data}))},h=function(e){return s.a.post(b,e).then((function(e){return e.data}))},v=function(e,t){return s.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},E=function(e){return s.a.delete("".concat(b,"/").concat(e))},g=function(e){var t=e.message,n=e.error;return t?0===n?r.a.createElement("div",{style:{color:"green",background:"lightgrey",fontSize:"15px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}},t," "):r.a.createElement("div",{style:{color:"red",background:"lightgrey",fontSize:"15px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}},t," "):null},S=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],l=t[1],o=Object(a.useState)(""),f=Object(c.a)(o,2),s=f[0],b=f[1],S=Object(a.useState)(""),w=Object(c.a)(S,2),x=w[0],O=w[1],j=Object(a.useState)(""),k=Object(c.a)(j,2),y=k[0],C=k[1],N=Object(a.useState)("all"),I=Object(c.a)(N,2),D=I[0],T=I[1],B=Object(a.useState)(""),z=Object(c.a)(B,2),F=z[0],J=z[1],L=Object(a.useState)(""),R=Object(c.a)(L,2),A=R[0],P=R[1],q=Object(a.useState)(0),G=Object(c.a)(q,2),H=G[0],K=G[1],M=function(e){return n.find((function(t){return t.name===e}))},Q="all"===D?n:"male"===D?n.filter((function(e){return"male"===e.sex})):n.filter((function(e){return"female"===e.sex}));return Object(a.useEffect)((function(){p().then((function(e){l(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(g,{message:A,error:H}),r.a.createElement(i,{handleFilter:function(e){var t=e.target.value;J(t)},handleShow:function(e){e.preventDefault();var t=e.target.dataset.value;T("all"===t?"all":"male"===t?"male":"female")}}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(m,{newName:s,newNumber:x,newSex:y,handleNameInput:function(e){return b(e.target.value)},handleNumberInput:function(e){return O(e.target.value)},handleSexInput:function(e){return C(e.target.value)},handleSubmit:function(e){e.preventDefault();var t=M(s);if(t){if(window.confirm("".concat(s," is already added to phonebook, replace the old info?"))){var a=Object(u.a)(Object(u.a)({},t),{},{number:x,sex:y});v(t.id,a).then((function(e){console.log("\u66f4\u65b0\u6210\u529f\uff0c\u8fd4\u56de\u6570\u636e",e),l(n.map((function(n){return n.id!==t.id?n:e}))),P("updated ".concat(t.name)),setTimeout((function(){P("")}),3e3),b(""),O(""),C("")})).catch((function(e){P("information of ".concat(t.name," has already been removed from server, please reflesh your page")),K(1),setTimeout((function(){P("")}),3e3),b(""),O(""),C("")}))}}else h({name:s,number:x,sex:y}).then((function(e){console.log("\u65b0\u589e\u6210\u529f\uff0c\u8fd4\u56de\u6570\u636e",e),l(n.concat(e)),P("added ".concat(s)),setTimeout((function(){P("")}),3e3),b(""),O(""),C("")})).catch((function(e){console.log(e.response.data.error);var t=e.response.data.error;P(t),K(1),setTimeout((function(){P("")}),4e3),b(""),O(""),C("")}))}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(d,{personsToShow:Q,filterStr:F,handleDelete:function(e,t){e.preventDefault();var a=n.find((function(e){return e.id===t})).name;if(window.confirm("Delete ".concat(a,"?"))){var r=n.filter((function(e){return e.id!==t}));l(r),E(t)}}}))};o.a.render(r.a.createElement(S,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.c0882670.chunk.js.map