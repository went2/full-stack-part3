{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Message.js","App.js","index.js"],"names":["Filter","handleFilter","handleShow","onChange","onClick","data-value","PersonForm","props","value","newName","handleNameInput","newNumber","handleNumberInput","newSex","handleSexInput","type","handleSubmit","Persons","personsToShow","filterStr","handleDelete","filter","item","name","toLowerCase","indexOf","map","key","number","sex","event","id","baseUrl","axios","get","then","res","data","newObject","post","put","delete","Message","message","error","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","useState","persons","setPersons","setNewName","setNewNumber","setNewSex","show","setShow","setFilter","setMessage","setError","compareName","find","person","useEffect","personService","initialData","query","target","preventDefault","showButton","dataset","samePerson","window","confirm","updatedPeson","returnedData","console","log","setTimeout","catch","concat","response","errorMessage","deletedName","newPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c0882670.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = ({handleFilter, handleShow}) => {\n\n  return (\n    <form>\n      filter shown with <input onChange= { handleFilter } />\n      <div>\n        <button onClick={ handleShow } data-value='all'>all</button>\n        <button onClick={ handleShow } data-value='male'>male</button>\n        <button onClick={ handleShow } data-value='female'>female</button>\n      </div>\n    </form>\n  );\n\n};\n\n\nexport default Filter;","import React from 'react';\n\nconst PersonForm = (props) => {\n\n  return (\n    <form>\n        <div>\n          name: \n          <input\n          value={props.newName}\n          onChange={ props.handleNameInput } />\n        </div>\n        <div>\n          number: \n          <input \n          value={props.newNumber}\n          onChange={ props.handleNumberInput }\n          />\n        </div>\n        <div>\n          sex: \n          <input \n          value={props.newSex}\n          onChange={ props.handleSexInput }\n          />\n        </div>\n        <div>\n          <button \n          type=\"submit\"\n          onClick={ props.handleSubmit }\n          >add</button>\n        </div>\n      </form>\n  );\n\n};\n\nexport default PersonForm;","import React from 'react';\n\nconst Persons = ({ personsToShow, filterStr, handleDelete }) => \n  personsToShow\n  .filter(\n    item => \n    item.name.toLowerCase().indexOf(filterStr.toLowerCase()) > -1\n  )\n  .map(\n    item => \n      <div \n      key={item.name}>\n        {item.name}: {item.number} {item.sex} \n        <button \n          key={item.name}\n          onClick={ event => handleDelete(event, item.id) }\n          >delete</button>\n      </div>\n  );\n\nexport default Persons;","import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = function() {\n  return axios.get(baseUrl).then(res => res.data);\n};\n\nconst create = function(newObject) {\n  return axios.post(baseUrl, newObject).then(res => res.data);\n};\n\nconst update = function(id, newObject) {\n  return axios.put(`${baseUrl}/${id}`, newObject).then(res => res.data);\n};\n\nconst deleteItem = function(id) {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nexport default { getAll, create, update, deleteItem };\n\n","import React from 'react';\n\nconst Message = function({ message,error }) {\n  const messageStyle1 = {\n    color: 'green',\n    background: 'lightgrey',\n    fontSize: '15px',\n    borderStyle: 'solid',\n    borderRadius: '5px',\n    padding: '10px',\n    marginBottom: '10px'\n  }\n\n  const messageStyle2 = {\n    color: 'red',\n    background: 'lightgrey',\n    fontSize: '15px',\n    borderStyle: 'solid',\n    borderRadius: '5px',\n    padding: '10px',\n    marginBottom: '10px'\n  }\n\n  if (!message) {\n    return null;\n  } \n  \n  return (\n    error === 0 ? \n    <div style={messageStyle1}>{message} </div> :\n    <div style={messageStyle2}>{message} </div> \n  );\n\n};\n\nexport default Message;","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport personService from './services/persons';\nimport Message from './components/Message';\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ newSex, setNewSex ] = useState('');\n  const [ show, setShow ] = useState('all');\n  const [ filter, setFilter ] = useState('');\n  const [ message, setMessage] = useState('');\n  const [ error, setError] = useState(0);\n  \n  const handleSubmit = event => {\n    event.preventDefault();\n\n    const samePerson = compareName(newName);\n    if (samePerson) {\n     const cfm = window.confirm(`${newName} is already added to phonebook, replace the old info?`);\n     if (cfm) {\n      const updatedPeson = {\n        ...samePerson,\n        number: newNumber,\n        sex: newSex\n      };\n      personService\n        .update(samePerson.id, updatedPeson)\n        .then(returnedData => {\n          console.log('更新成功，返回数据',returnedData);\n          setPersons(persons.map(person => person.id !== samePerson.id ? person : returnedData));\n          setMessage(`updated ${samePerson.name}`);\n          setTimeout(() => {\n            setMessage('')\n          }, 3000)\n          setNewName('');\n          setNewNumber('');\n          setNewSex('');\n        })\n        .catch((error) => {\n          // console.log(error);\n          setMessage(`information of ${samePerson.name} has already been removed from server, please reflesh your page`);\n          setError(1);\n          setTimeout(() => {\n            setMessage('')\n          }, 3000)\n          setNewName('');\n          setNewNumber('');\n          setNewSex('');\n        });\n     }\n\n    } else {\n      const newPerson = {\n        name: newName,\n        number: newNumber,\n        sex: newSex\n      }\n      personService\n        .create(newPerson)\n        .then(returnedData => {\n          console.log('新增成功，返回数据',returnedData);\n          setPersons(persons.concat(returnedData));\n          setMessage(`added ${newName}`);\n          setTimeout(() => {\n            setMessage('')\n          }, 3000)\n\n          setNewName('');\n          setNewNumber('');\n          setNewSex('');\n        })\n        .catch((error) => {\n          console.log(error.response.data.error);\n          const errorMessage = error.response.data.error;\n          setMessage(errorMessage);\n          setError(1);\n          setTimeout(() => {\n            setMessage('')\n          }, 4000)\n          setNewName('');\n          setNewNumber('');\n          setNewSex('');\n        })\n    }\n  };\n\n  const compareName = (newName) => {\n    let filtedperson = persons.find( person => person.name === newName );\n    return filtedperson;\n  };\n\n  const showWho = () => {\n    if (show === 'all') {\n      return persons;\n    } else if (show === 'male') {\n      return persons.filter(person => person.sex === 'male')\n    } else {\n      return persons.filter(person => person.sex === 'female')\n    }\n  }\n  let personsToShow = showWho();\n\n  const handleDelete = (event, id) => {\n    event.preventDefault();\n    const deletedName = persons.find(persons => persons.id === id).name;\n    const cfm = window.confirm(`Delete ${deletedName}?`);\n    if (cfm) {\n      const newPersons = persons.filter(person => person.id !== id);\n      setPersons(newPersons);\n      personService.deleteItem(id)\n    }\n  };\n\n  const handleShow = (event) => {\n    event.preventDefault();\n    const showButton = event.target.dataset.value;\n    if (showButton === 'all') {\n      setShow('all');\n    } else if (showButton === 'male') {\n      setShow('male');\n    } else {\n      setShow('female');\n    }\n  }\n\n  const handleFilter = (event) => {\n    const query = event.target.value;\n    setFilter(query);\n  };\n\n  const handleNameInput = (event) => setNewName(event.target.value);\n  const handleNumberInput = (event)=> setNewNumber(event.target.value);\n  const handleSexInput = (event) => setNewSex(event.target.value);\n\n  // use axios to fetch initial state of the application \n  const hook = () => {\n    personService\n      .getAll()\n      .then( initialData => {\n        setPersons(initialData);\n      })\n  }\n  useEffect(hook, []);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message\n        message={message}\n        error={error}\n      />\n      <Filter \n        handleFilter={ handleFilter }\n        handleShow={ handleShow }\n      />\n      \n      <h2>Add a new</h2>\n      <PersonForm \n        newName = { newName }\n        newNumber = { newNumber }\n        newSex = { newSex }\n        handleNameInput = { handleNameInput }\n        handleNumberInput = { handleNumberInput }\n        handleSexInput = { handleSexInput }\n        handleSubmit = { handleSubmit }\n      />\n\n      <h2>Numbers</h2>\n      <Persons \n        personsToShow = { personsToShow } \n        filterStr = { filter }\n        handleDelete = { handleDelete }\n      />\n    </div>\n  )\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}